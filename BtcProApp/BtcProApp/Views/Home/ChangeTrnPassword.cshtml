<script src="~/Scripts/angular.min.js"></script>
<script src="~/app/scripts/TrnPasswordChangeController.js"></script>

<section class="wrapper">
    <div ng-app="app" ng-controller="TrnPasswordChange" ng-cloak>
        <div class="row">
            <div class="col-sm-12">
                <section class="panel">
                    <header class="panel-heading">
                        <i class="fa fa-lock" style="color:green"></i> Transaction Password Change
                    </header>
                    <div class="panel-body" style="background-color:antiquewhite">
                        <form name="PasswordForm" class="form-validation" ng-show="isExists">
                            <table style="width:50%;margin:0 auto" class="table" >
                                <tr>
                                    <td style="width:50%;text-align:right;padding-top:20px"><label>Type Old Transaction Password:</label></td>
                                    <td><input type="password" ng-model="oldpassword" class="form-control" ng-blur="checkOldPwd()" ng-required="true"/>
                                        <label ng-if="oldpwdErrMsg!=''" style="color:red">{{oldpwdErrMsg}}</label>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width:50%;text-align:right;padding-top:20px"><label>Type New Transaction Password:</label></td>
                                    <td><input type="password" ng-model="newpassword" class="form-control" ng-change="checkNewPwd()" ng-required="true"/> @*ng-pattern="/^[A-Za-z0-9]*$/" ng-minlength="6" ng-maxlength="14"*@
                                        <label ng-if="newpwdErrMsg!=''" style="color:red">{{newpwdErrMsg}}</label>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width:50%;text-align:right;padding-top:20px"><label>Confirm New Transaction Password:</label></td>
                                    <td><input type="password" ng-model="confirmpassword" class="form-control" ng-change="checkConfirmPwd()"  ng-required="true"/> @*ng-pattern="/^[A-Za-z0-9]*$/" ng-minlength="6" ng-maxlength="14"*@
                                        <label ng-if="confirmpwdErrMsg!=''" style="color:red">{{confirmpwdErrMsg}}</label>
                                    </td>
                                </tr>
                            </table>
                            <div style="text-align:center;margin-top:10px;margin-bottom:20px">
                                <button type="button" value="Submit" class="btn btn-primary" ng-click="submit()" ng-disabled="PasswordForm.$invalid || oldpwdErrMsg!='' || newpwdErrMsg!='' || confirmpwdErrMsg!=''">Submit</button>
                            </div>
                        </form>

                        <div ng-if="!isExists">
                            <h2 style="color:darkseagreen;text-align:center">Your transaction password is not set. You can transfer only after it is set!!!</h2><br />
                            <table style="width:50%;margin:auto !important">
                                <tr>
                                    <td style="width:50%;text-align:right;padding-right:20px">New Transaction password:</td>
                                    <td><input type="password" ng-model="trxpassword" class="form-control" /></td>
                                </tr>
                            </table>
                            <div style="text-align:center"><button class="btn" ng-click="updateTrnPwd(trxpassword)" style="background-color:orange;margin-top:15px"><i class="fa fa-key"></i> Set Transaction Password</button></div>
                        </div>
                        <div ng-if="isExists" style="text-align:center;margin-top:15px;"><a ng-click="sendMyTransactionPassword()" ng-hide="sending" style="text-decoration:underline;cursor:pointer">Forgot Transaction Password</a><span><img ng-show="sending" src="~/Content/loader.gif" /></span></div>
                    </div>
                </section>
            </div>
        </div>
    </div>
</section>
